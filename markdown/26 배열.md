## 26 배열

### 배열이란?

배열은 **요소(element)**들을 가지고, 그 위치를 **인덱스(index)**로 가지고 있다. 대괄호 표기법을 사용하여 인덱스를 넣으면 요소에 접근할 수 있다.

배열은 요소의 개수(배열의 길이)를 나타내는 length 프로퍼티를 가진다. 자바스크립트의 배열은 사실 객체이며 Array 생성자 함수로 생설할 수 있다.

일반 객체와 배열의 가장 명확한 차이는 **값의 순서**와 **length 프로퍼티**다. 배열은 순차적으로 요소에 접근할 수 있고, 거꾸로도 접근할 수 있고, 특정 위치에서부터 접근할 수 있다는 장점이 있다.

### 자바스크립트 배열은 배열이 아니다.

다른 언어에서의 배열은 메모리 공간에 빈틈없이 연속적으로 나열되어있다. 타입이 통일되어 있으며 서로 연속적으로 인접하여 있다. 이러한 배열을 **밀집 배열**이라고 한다.

자바스크립트의 배열은 이와 좀 다르다. 메모리 공간의 크기가 갖지 않고, 연속적이지 않아도 된다. 이러한 배열을 **희소배열**이라고 한다. 사실 자바스크립트의 배열은 객체다. 하지만 자바스크립트 엔진은 객체와 배열을 구분하여 배열처럼 동작하도록 최적화하여 구현했다.

### length 프로퍼티와 희소 배열

배열의 길이(length)는 정수로 나타낸다. length 프로퍼티의 값은 요소를 추가하거나 삭제하면 자동으로 갱신된다.

값을 임의로 할당할 수도 있다. 값이 배열보다 작다면 길이가 줄어들고, 크다면 empty 라는 실존하지 않는 배열을 갖고 length의 값이 변경된다. 하지만 이렇게 하지 않는것이 좋다.

### 배열 생성

- **배열 리터럴** : 대괄호를 이용해서 리터럴로 값을 넣을 수 있다.
- **Array 생성자 함수** : 전달된 인수의 개수에 따라 다르게 동작한다. 인수가 1개의 정수면 사이즈를 의미하고, 그렇지 않다면 빈 배열 또는 인수를 요소로 갖는 배열을 생성한다.
- **Array.of** : 생성자 함수와 다르게 인수가 1개여도 인수를 요소로 갖는 배열을 생성한다.
- **Array.from** : 유사 배열 객체 또는 이터러블 객체를 매개변수로 받아서 해체 후 새로운 배열로 만들어 준다. 두번째 인수로 콜백함수를 받을 수 있는데,

### 배열 요소의 참조

대괄호 표기법을 사용하여 전달하며, 값이 없다면 undefined를 반환한다.

### 배열 요소의 추가와 갱신

존재하는 인덱스에 값을 할당하면 값이 갱신되고, 존재하지 않는 인덱스에 값을 할당하면 값이 동적으로 추가된다. 중간에 요소를 비워두면 empty를 가진 희소배열이 된다.

인덱스가 들어갈 자리에 정수가 아닌 수를 넣으면 프로퍼티 취급되어 값이 추가된다. `arr['foo'] = 3;`을 하면 `foo: 3`이라는 프로퍼티가 그냥 배열에 추가된다.

### 배열 요소의 삭제

delete를 이용하여 요소를 삭제할 수 있지만, 권장하지 않는다.

### 배열 메소드

- **Array.isArray** : 주어진 인수가 배열이면 true, 배열이 아니면 false를 반환하다.
- **Array.prototype.push **: 배열의 마지막에 값을 추가하고 변경된 length 값을 반환한다. **원본 배열을 직접 변경한다.** (비 순수 함수(mutator method))
- **Array.prototype.pop **: 배열의 마지막 값을 제거하고, 제거한 요소를 반환한다. **원본 배열을 직접 변경한다.** (비 순수 함수(mutator method))
- **Array.prototype.unshift **: 배열의 첫번재에 값을 추가하고 변경된 length 값을 반환한다. **원본 배열을 직접 변경한다.** (비 순수 함수(mutator method))
- **Array.prototype.shifh**  :  배열의 첫번째 값을 제거하고, 제거한 요소를 반환한다. **원본 배열을 직접 변경한다.** (비 순수 함수(mutator method))
- **Array.prototype.concat **: 전달된 값을 원본 배열의 마지막요소로 해체하여 추가하고, 새로운 배열을 반환한다. **원본 배열을 변경하지 않는다.** (배열을 생성하여 반환(accessor method))
- **Array.prototype.splice **: 배열의 중간 요소를 추가하거나 삭제할 경우 사용한다. (제거를 시작할 인덱스 [, 제거할 개수, [제거한 위치에 삽입할 요소]])를 매개변수로 받는다. **원본 배열을 직접 변경한다.** (비 순수 함수(mutator method))
- **Array.prototype.slice **: 전달된 범위의 요소를 복사하여 반환한다. 시작점과 끝점을 인덱스로 받는다. **원본 배열을 변경하지 않는다.** (배열을 생성하여 반환(accessor method))
- **Array.prototype.indexOf ** : 인수로 전달된 요소를 검색하여 있으면 1을, 없으면 -1을 반환한다.
- **Array.prototype.join **: 값을 리턴하는데 인자로 중간에 넣을 구분자를 입력할 수 있다. **원본 배열을 변경하지 않는다.** (배열을 생성하여 반환(accessor method))
- **Array.prototype.reverse** : 값을 뒤집는다. **원본 배열을 직접 변경한다.** (비 순수 함수(mutator method))
- **Array.prototype.fill** : 3개의 매겨변수를 가지며,  전달 받은 값으로 요소의 배열을 채운다. (채울 값 [, 시작할 인덱스 [, 멈출 인덱스]])  **원본 배열을 직접 변경한다.** (비 순수 함수(mutator method))
- **Array.prototype.includes **: 요소가 포함되어있는지 확인한다. 불리언 값을 반환한다.

### 배열 고차함수

- **Array.prototype.sort** : 요소들을 정렬한다. sort 메소드의 경우 문자열로 값을 변경한 후 정렬을 해주기 때문에 숫자가 들어가면 예상과 다른 결과가 출력된다. 따라서 숫자를 비교하는 경우 비교함수를 주어야 한다. `sort(function (a, b) => a - b);`
- **Array.prototype.forEach** : for문처럼 동작하는데 break, continue를 사용할 수 없다. 하지만 for문보다 가독성이 좋다. 배열이 엄청나게 크지 않거나, 속도가 엄청나게 중요한 것이 아니라면 forEach를 활용하는 것이 좋다. (배열의 요소, 인덱스, this) 3개의 인수를 가지며 생략 가능하다. 앞의 값을 생략시 _로 표현한다.`(\_, index)`
- **★Array.prototype.map★ **: 원본 배열은 변환되지 않고, 하나씩 맵핑한다고 생각하면 된다. 실행 결과를 새로운 배열에 push하게 된다. **원본배열과 새 배열의 length가 항상 같다.**
- **★Array.prototype.filter★ **: 조건식을 넣게되고 true의 값이 나오는 것만 새로운 배열에 추가한다. **원본 배열에 비해 새 배열의 length가 작거나 같다.**
- **★Array.prototype.reduce★ **:  위 forEach, map, filter와 다르게 요소 4개(pre, cur, index, self)를 사용한다. 또한 두번째 인수로 초기값을 받는다(옵션이지만 주는 버릇을 갖도록 하자). **새 배열의 결과가 1개가 된다.**
- **Array.prototype.some **: 하나라도 조건에 맞다면 true를 반환한다.
- **Array.prototype.every **: 모든게 조건에 맞아야 true를 반환한다.
- **Array.prototype.find** : 찾은 요소를 반환한다. 같은 것이 존재한다면 앞의 것을 반환한다.
- **Array.prototype.findIndex **: find와 비슷한데 인덱스를 반환한다.