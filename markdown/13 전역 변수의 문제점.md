## 전역 변수의 문제점

### 변수의 생명 주기

- 지역 변수의 생명 주기
  - 함수가 호출되면 생성되고, 함수가 종료되면 소멸한다.
  - **변수 호이스팅 또한 그 지역 내에서만 호이스팅 된다.**
- 전역 변수의 생명 주기
  - 전역변수는 코드를 실행하면 바로 생성된다. 브라우저 환경에서 var로 선언된 전역 변수는 웹 페이지가 종료할 때 까지 유효하게 된다.

### 전역 변수의 문제점

- 모든 코드가 변수를 참조하고 변경할 수 있다. 이를 **암묵적 결합**이라고 한다.
  - 변수의 유효 범위가 클수록 코드의 가독성은 나빠지고, 암묵적 결합에 의해 의도치 않게 상태가 변경될 수 있는 위험성도 높다.
- 전역 변수는 **생명주기가 길다**. 즉 상태가 변경될 확률이 높고, 그로 인해 오류가 발생될 확률도 높다. 메모리 리소스도 많이 소비하게 된다.
- 변수를 참조할 때 스코프 체인을 따라가는데, 전역변수는 가장 마지막에 존재한다. 즉 **전역 변수의 검색속도는 가장 느리다.**
- 자바스크립트의 특성상 파일이 분리되어 있어도 **하나의 전역스코프를 공유**한다. 동일한 이름으로 명명된 변수나 함수가 존재할 경우 위험하다.

### 전역 변수 사용 억제 방법

- 즉시 실행 함수
  - 함수의 정의와 동시에 호출되는 즉시 실행 함수는 단 한번만 호출된다. **모든 코드를 즉시 실행 함수로 감싸면 모든 변수는 지역 변수가 된다.**
  - 이 방법은 라이브러리 등에 자주 사용된다.
- 네임 스페이스 객체
  - 객체를 만들어서 네임 스페이스를 분리할 수 있다. 충돌을 방지할 수 있지만, 네임스페이스 객체 자체가 전역변수에 할당되므로 그리 유용하지 않다.
- 모듈 패턴
  - 관련이 있는 변수와 함수를 모아 즉시 실행 함수로 감싸서 하나의 모듈을 만든다. 클로저를 기반으로 동작한다.
  - 모듈 패턴은 전역 변수를 억제하는 것은 물론, 캡슐화까지 구현할 수 있다. 캡슐화는 외부에 공개하기 싫은 변수를 내부에서 보호하는 기능을 의미한다.
- ES6 모듈
  - ES6에서 도입된 모듈을 사용하여 억제할 수 있지만, 대부분의 브라우저가 완전히 지원하지는 않고 있다.